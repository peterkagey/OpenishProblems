\documentclass{article}
\include{header}

\begin{document}
\rating{2}{1}
Say that two sequences with distinct elements are in the same equivalence
class if their first differences have the same signs.
(e.g. $(1, 3, 2, 3)$ and $(7,8,-1,0)$ are equivalent because their first
differences are both $(+, -, +)$.)
\begin{figure}[!h]
  \centering
  \begin{tikzpicture}[scale = 0.9]
    \draw[gray] (-0.25, -1.25) rectangle (3.25, 2.25);
    \draw[ultra thick](0,0)--(1,1)--(2,-1)--(3,2);
    \fill[red!50] (0,0) circle (0.1cm);
    \fill[blue!50] (1,1) circle (0.1cm);
    \fill[green!50] (2,-1) circle (0.1cm);
    \fill[magenta!50] (3,2) circle (0.1cm);
    \node at (1.5, -1.5) {$(+, -, +)$};
  \end{tikzpicture}\hspace{0.5cm}
  \begin{tikzpicture}[scale = 0.9]
    \draw[gray] (-0.25, -1.25) rectangle (3.25, 2.25);
    \draw[ultra thick](0,0)--(1,1)--(2,-1);
    \fill[red!50] (0,0) circle (0.1cm);
    \fill[blue!50] (1,1) circle (0.1cm);
    \fill[green!50] (2,-1) circle (0.1cm);
    \fill[magenta!50] (3,2) circle (0.1cm);
    \node at (1.5, -1.5) {$(+, -)$};
  \end{tikzpicture}\hspace{0.5cm}
  \begin{tikzpicture}[scale = 0.9]
    \draw[gray] (-0.25, -1.25) rectangle (3.25, 2.25);
    \draw[ultra thick](0,0)--(1,1)--(3,2);
    \fill[red!50] (0,0) circle (0.1cm);
    \fill[blue!50] (1,1) circle (0.1cm);
    \fill[green!50] (2,-1) circle (0.1cm);
    \fill[magenta!50] (3,2) circle (0.1cm);
    \node at (1.5, -1.5) {$(+, +)$};
  \end{tikzpicture}\\\vspace{0.5cm}
  \begin{tikzpicture}[scale = 0.9]
    \draw[gray] (-0.25, -1.25) rectangle (3.25, 2.25);
    \draw[ultra thick](0,0)--(2,-1)--(3,2);
    \fill[red!50] (0,0) circle (0.1cm);
    \fill[blue!50] (1,1) circle (0.1cm);
    \fill[green!50] (2,-1) circle (0.1cm);
    \fill[magenta!50] (3,2) circle (0.1cm);
    \node at (1.5, -1.5) {$(-, +)$};
  \end{tikzpicture}\hspace{0.5cm}
  \begin{tikzpicture}[scale = 0.9]
    \draw[gray] (-0.25, -1.25) rectangle (3.25, 2.25);
    \draw[ultra thick](0,0)--(1,1);
    \fill[red!50] (0,0) circle (0.1cm);
    \fill[blue!50] (1,1) circle (0.1cm);
    \fill[green!50] (2,-1) circle (0.1cm);
    \fill[magenta!50] (3,2) circle (0.1cm);
    \node at (1.5, -1.5) {$(+)$};
  \end{tikzpicture}\hspace{0.5cm}
  \begin{tikzpicture}[scale = 0.9]
    \draw[gray] (-0.25, -1.25) rectangle (3.25, 2.25);
    \draw[ultra thick](1,1)--(2,-1);
    \fill[red!50] (0,0) circle (0.1cm);
    \fill[blue!50] (1,1) circle (0.1cm);
    \fill[green!50] (2,-1) circle (0.1cm);
    \fill[magenta!50] (3,2) circle (0.1cm);
    \node at (1.5, -1.5) {$(-)$};
  \end{tikzpicture}
  \caption{
    $(0, 1, -1, 2)$ has subsequences in the following six equivalence classes:
    $(+, -, +)$, $(+, +)$, $(+, -)$, $(-, +)$, $(+)$, $(-)$. No length $4$
    sequence has its subsequences in more equivalence classes, so $a(4) = 6$.
  }
\end{figure}

\begin{question}
  What is the general formula for $a(n)$?
\end{question}
\begin{related}
  \item What if the sequences do not necessarily consist of distinct elements?
  \item What if two sequences are considered to be equivalent if they are in the
    same ``sort order''; that is, if both sequences have their biggest element
    in the same position, their second biggest in the same position, and so on.
  \item What if $(+, +) \sim (+)$?
  \item Is the number of equivalence classes for the subsequences determined by
   the number of local minima and maxima?
\end{related}

\begin{note}
  A quick attempt finds that $a(2) = 1$, $a(3) = 3$, $a(4)=6$, and $a(5)=11$.
  (Fibonacci minus 2?)\\
  For related question 3, conjecture the answer is $a'(n) = 2n - 3$ for $n \geq 2$.\\
  For related question 3 without distinct elements (as in related question 1),
  the inital terms are
  \begin{align*}
    a(2) &= 1 \text { via } (+)  \\
    a(3) &= 4 \text { via } (+, -), (+), (-), (=)  \\
    a(4) &= 8 \text { via } (+, -, +), (+, -), (+, =), (=, +), (-, _) (+), (-), (=)  \\
    a(5) &= 15; a(6) = 25; a(7) = 40\\
    a(8) &= 62; a(9) = 94; a(10) = 141; a(11) = 210; a(12) = 311 \text{ (conjectured*)}
  \end{align*}
  * Assumes sequence is $(1,2,1,2,1,2,\hdots)$.
\end{note}

\end{document}
